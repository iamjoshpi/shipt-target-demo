/*-------------------------------------------
AUTHOR: JOSHUA WHITNEY
TITLE: TARGET SHIPT DEMO
CREATED: 05/02/2018
----------------------------------------------*/

$(document).ready(function(){$("#zipButton").click(function(){$("#target-banner-error").empty(),$("#zipResults").empty();var e="https://shipt-zip-code-test-api.herokuapp.com/api/zip_codes/"+$("#zipInput").val();$.ajax({url:e,type:"GET",success:function(e){var t="";if(t+='<div id="zipResults" class="row text-center"><b>DELIVERING FROM:</b><br><br>',1==e.stores.length)var r=0;else r=1;var a=0,s=new Date,n=s.getDate();n=("0"+n).slice(-2);var o=s.getMonth();o=("0"+o).slice(-2);var i,l,c,p,u=s.getFullYear()+"-"+o+"-"+n;for(u=new Date(u);a<e.stores.length-r;){var d=e.stores[a].launch_date,h=d.substr(0,10),g=d.substring(2,4),b=d.substring(5,7);h=new Date(e.stores[a].launch_date);Date.parse(h)==Date.parse(u)&&(launch="Launching Today!! Lucky you. You can be one of the first to try it."),Date.parse(h)<Date.parse(u)?launch="Now Available":launch="Coming "+b+" / "+g,1==e.stores.length?t+='<div class="col-lg-12">':t+='<div class="col-lg-4 col-md-4 col-sm-4 col-xs-12">',t+="<h3>"+e.stores[a].name+"</h3><p>"+launch+"</p></div>",a++}for(t+='<div class="btn button-lg shipt-button box-shadow txt-shadow text-center" style="width:193px;clear:both;margin:100px">GET STARTED</div></div>',$("#zipResults").replaceWith(t),i=document.getElementById("zipResults"),l=!0;l;){for(l=!1,c=i.getElementsByTagName("DIV"),a=0;a<c.length-1;a++)if(p=!1,c[a].innerHTML.toLowerCase()>c[a+1].innerHTML.toLowerCase()){p=!0;break}p&&(c[a].parentNode.insertBefore(c[a+1],c[a]),l=!0)}},error:function(e){$("#zipForm").addClass("has-error"),$("#target-banner-error").replaceWith('<div id="target-banner-error">THIS ZIPCODE IS INVALID! PLEASE TRY AGAIN.</div>')}})})});